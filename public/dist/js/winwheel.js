const v=io(),c=document.getElementById("winwheelCanvas"),e=c.getContext("2d"),s=200,h=80,i=50,o=c.width/2,t=c.height/2;let d=0;const x=[{id:"p1",label:"Prix 1",color:"gold"},{id:"p2",label:"Prix 2",color:"orange"},{id:"p3",label:"Prix 3",color:"darkgoldenrod"},{id:"p4",label:"Prix 4",color:"purple"},{id:"p5",label:"Prix 5",color:"gold"}],g=[{id:"j1",label:"$100.000",bgPriceColor:"#e344d1",borderColor:"#fff",textColor:"#e344d1",bgTextColor:"#fff",borderSize:2},{id:"j2",label:"$250.000",bgPriceColor:"#5588c5",borderColor:"#fff",textColor:"#5588c5",bgTextColor:"#fff",borderSize:2},{id:"j3",label:"$500.000",bgPriceColor:"#7340c9",borderColor:"#fff",textColor:"#7340c9",bgTextColor:"#fff",borderSize:2},{id:"j4",label:"$1.000.000",bgPriceColor:"#e75d6b",borderColor:"#fff",textColor:"#e75d6b",bgTextColor:"#fff",borderSize:2}],y="#dddddd",C=new Image;C.src="http://place-hold.it/64";function m(){e.clearRect(0,0,c.width,c.height);const n=2*Math.PI/g.length;g.forEach((l,a)=>{const r=n/x.length;x.forEach((P,S)=>{const b=d+n*a+r*S,T=b+r;e.beginPath(),e.moveTo(o,t),e.arc(o,t,s,b,T),e.lineTo(o,t),e.fillStyle=l.bgPriceColor,e.fill(),e.strokeStyle=l.borderColor,e.lineWidth=l.borderSize,e.stroke(),e.closePath();const f=b+r/2;e.save(),e.translate(o+Math.cos(f)*(s*.5),t+Math.sin(f)*(s*.5)),e.rotate(f),e.fillStyle=l.bgTextColor,e.fillText(P.label,0,0),e.restore()})}),g.forEach((l,a)=>{e.beginPath(),e.moveTo(o,t),e.arc(o,t,h,n*a+d,n*(a+1)+d),e.fillStyle=y,e.fill(),e.strokeStyle=l.borderColor,e.lineWidth=l.borderSize,e.stroke(),e.closePath();const r=n*a+d+n/2;e.save(),e.translate(o+Math.cos(r)*(h*.7),t+Math.sin(r)*(h*.7)),e.rotate(r+Math.PI/2),e.fillStyle=l.textColor,e.font="bold 12px "+e.font.split(" ").slice(-1)[0],e.fillText(l.label,-e.measureText(l.label).width/2,0),e.restore()}),e.save(),e.beginPath(),e.arc(o,t,i,0,2*Math.PI),e.clip(),e.drawImage(C,o-i,t-i,i*2,i*2),e.restore(),e.beginPath(),e.arc(o,t,i,0,2*Math.PI),e.strokeStyle="black",e.lineWidth=2,e.stroke(),e.save(),e.translate(o,t-s-20),e.beginPath(),e.moveTo(0,0),e.lineTo(-10,-20),e.lineTo(10,-20),e.closePath(),e.fillStyle="#e75d6b",e.fill(),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.restore()}C.onload=m;v.on("connect",()=>{console.log("Connected to server")});
